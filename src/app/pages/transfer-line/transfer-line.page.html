<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="savePO()">
        <ion-icon slot="icon-only" name="document"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Transfer-Line</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card class="scanCard">
    <ion-card-content class="padding">
      <ion-item lines="none" class="ionItemInput">
        <ion-input type="text" hideKeyboard #input id="barcodeInput" placeholder="Scan" autofocus="true"
          [(ngModel)]="barcode" (ionChange)="barcodeScan()" (ionFocus)="keyboardHide()" (click)="clearBarcode()">
        </ion-input>

        <ion-button fill="clear" slots="end" item-right (click)="clearBarcode()">
          <ion-icon name="close"></ion-icon>
        </ion-button>
      </ion-item>
      <div class="alert alert-warning">
        Total Scan Qty: {{scannedQty}}
      </div>
    </ion-card-content>
  </ion-card>


  <div *ngFor="let toLine of toLineList,let i=index">
    <div *ngIf="toLine.isVisible">
      <ion-card class="lineDetails">
        <ion-card-header>
          <span class="iconPos">
            <ion-checkbox color="primary" mode="ios" [disabled]="toLine.btnDisable" [checked]="toLine.isSaved">
            </ion-checkbox>
          </span>
          <span (click)="toggleDetails(toLine,i)" style="width: 50%">
            <b><span>Id : {{toLine.ItemNo}}</span>
              <span style="margin-left: 15px;">UOM : {{toLine.UnitOfMeasure}}</span><br>
              Desc : {{toLine.qtyDesc}}</b>
          </span>
        </ion-card-header>
        <ion-card-content *ngIf="!toLine.toggle" class="itemLineContent">

          <ion-item lines="none" class="ionItemInput">
            <ion-label text-left>Barcode</ion-label>
            <!-- <ion-input type="text" style="text-align: left" [disabled]="true" [(ngModel)]="toLine.BarCode">
              </ion-input> -->
            <ion-label text-left> {{toLine.BarCode}} </ion-label>
          </ion-item>

          <ion-item lines="none" class="ionItemInput" *ngIf="pageType == 'transferOut'">
            <ion-label text-left style="margin-right: 10%;" class="ion-text-wrap">Qty To Ship</ion-label>
            <ion-input type="number" style="text-align:left;" [(ngModel)]="toLine.QtyToShip" id="Recinput{{i}}"
              (ionChange)="qtyRecCheck(toLine)" (keyup.enter)="onEnter(toLine)" (click)="clearQtyToRec(toLine)"
              [min]="0">
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="ionItemInput" *ngIf="pageType =='transferIn'">
            <ion-label text-left style="margin-right: 10%;" class="ion-text-wrap">Qty To Rec</ion-label>
            <ion-input type="number" style="text-align:left;" [(ngModel)]="toLine.QtyToReceive" id="Recinput{{i}}"
              (ionChange)="qtyRecCheck(toLine)" (keyup.enter)="onEnter(toLine)" (click)="clearQtyToRec(toLine)"
              [min]="0">
            </ion-input>
          </ion-item>



          <ion-item lines="none" class="ionItemInput">
            <ion-label text-left class="ion-text-wrap">Ordered Qty</ion-label>
            <ion-label text-left> {{toLine.Quantity}} </ion-label>
          </ion-item>


          <ion-item lines="none" class="ionItemInput" *ngIf="pageType == 'transferOut'">
            <ion-label text-left class="ion-text-wrap">Qty Shipped</ion-label>
            <ion-label text-left> {{toLine.QtyShipped}} </ion-label>
          </ion-item>

          <ion-item lines="none" class="ionItemInput" *ngIf="pageType =='transferIn'">
            <ion-label text-left class="ion-text-wrap">Qty Received</ion-label>
            <ion-label text-left> {{toLine.QtyReceived}} </ion-label>
          </ion-item>

          <ion-item lines="none" class="ionItemInput">
            <ion-label text-left class="ion-text-wrap">Balance</ion-label>
            <ion-label text-left> {{toLine.balance}} </ion-label>

          </ion-item>

          <!-- <ion-item lines="none" class="ionItemInput twoItems">
              <ion-label position="stacked" class="disabledInput">Unit Amount</ion-label>
              <ion-input type="text" [disabled]="true" [(ngModel)]="toLine.UnitAmt"></ion-input>
            </ion-item>
  
            <ion-item lines="none" class="ionItemInput twoItems">
              <ion-label position="stacked" class="disabledInput">Net Amount</ion-label>
              <ion-input type="text" [disabled]="true" [(ngModel)]="toLine.NetAmt"></ion-input>
            </ion-item> -->
          <div style="margin-top:10px">
            <ion-button expand="block" class="twoBtn" (click)="saveLine(toLine)" [disabled]="toLine.btnDisable">Save
            </ion-button>
            <ion-button expand="block" color="light" class="twoBtn" (click)="cancelBtn(toLine)">Clear</ion-button>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>

